function indexSearch(){var a=document.getElementById("indexSearchText").value;""!=a&&(document.getElementById("search_index").style.display="none",document.getElementById("search_list").style.display="",document.getElementById("indexListText").value=document.getElementById("indexSearchText").value,search())}function search(){var a=document.getElementById("indexListText").value;""!=a&&(Common.loadingNeedUnload({text:"",container:".loading-body"}),"all"==searchType?(allListDiv.html(""),houseListDiv.html(""),customerListDiv.html(""),carportListDiv.html(""),searchOne(houseSearchUrl,"houseName","house"),searchOne(customerSearchUrl,"customerName","customer"),searchOne(customerSearchUrl,"customerNumberMain","customer"),searchOne(customerSearchUrl,"customerNumberStandby","customer"),searchOne(customerSearchUrl,"customerNumberHomeTel","customer"),searchOne(customerSearchUrl,"customerNumberOfficeTel","customer"),searchOne(customerSearchUrl,"customerCertificateId","customer"),searchOne(houseSearchUrl,"carportName","carport")):"house"==searchType?(allListDiv.html(""),houseListDiv.html(""),searchOne(houseSearchUrl,"houseName","house")):"customer"==searchType?(allListDiv.html(""),customerListDiv.html(""),searchOne(customerSearchUrl,"customerName","customer"),searchOne(customerSearchUrl,"customerNumberMain","customer"),searchOne(customerSearchUrl,"customerNumberStandby","customer"),searchOne(customerSearchUrl,"customerNumberHomeTel","customer"),searchOne(customerSearchUrl,"customerNumberOfficeTel","customer"),searchOne(customerSearchUrl,"customerCertificateId","customer")):"carport"==searchType&&(allListDiv.html(""),carportListDiv.html(""),searchOne(houseSearchUrl,"carportName","carport")))}function searchOne(a,b,c){Common.ajax({url:a,type:"get",data:{code:b,value:document.getElementById("indexListText").value},success:function(a){if(a.success)for(var b=0;b<a.details.length;b++)addItem(a.details[b],c);Common.unLoading()}})}function addItem(a,b){Common.unLoading();var c="";"house"==b?(c+='<div class="result_card">',c+='    <img src="'+window.path.server+'/static/img/search/search-home.png">',c+='    <a href="'+window.path.server+"/page/house/"+a.id+'/details" title="'+a.extend1+'" class="result_card_detail">',c+="        <h1>"+a.extend1+"</h1>",c+="        <h2><label>业主：</label><span>"+a.extend2+"</span></h2>",c+="        <h3>"+a.name+"</h3>",c+="    </a>",c+="</div>",allListDiv.append(c),houseListDiv.append(c)):"customer"==b?(c+='<div class="result_card">',c+='    <img src="'+window.path.server+'/static/img/search/search-person.png">',c+=""!=a.extend3?'    <a href="'+window.path.server+"/page/customer/"+a.id+"/details?houseId="+a.extend3+'" title="'+a.name+'" class="result_card_detail">':'    <a href="#" class="result_card_detail">',c+="        <h1>"+a.name+"</h1>",c+="        <h2><label>手机号码：</label><span>"+a.extend1+"</span></h2>",c+="        <h3>"+a.extend2+"</h3>",c+="    </a>",c+="</div>",allListDiv.append(c),customerListDiv.append(c)):"carport"==b&&(c+='<div class="result_card">',c+='    <img src="'+window.path.server+'/static/img/search/search-car.png">',c+='    <a href="'+window.path.server+"/page/carport/"+a.id+'/details" title="'+a.extend1+'" class="result_card_detail">',c+="        <h1>"+a.extend1+"</h1>",c+="        <h2><label>业主：</label><span>"+a.extend2+"</span></h2>",c+="        <h3>"+a.name+"</h3>",c+="    </a>",c+="</div>",allListDiv.append(c),carportListDiv.append(c))}function setType(a){searchType=a}var searchType="all",customerSearchUrl=window.servicePath.customer+"/v1/search/",houseSearchUrl=window.servicePath.house+"/v1/search/",customerSearchCode=["customerName","customerNumberMain","customerNumberStandby","customerNumberHomeTel","customerNumberOfficeTel","customerCertificateId"],houseSearchCode=["houseName"],carportSearchCode=["carportName"],allListDiv=$("#allListDiv"),houseListDiv=$("#houseListDiv"),customerListDiv=$("#customerListDiv"),carportListDiv=$("#carportListDiv");jQuery(document).ready(function(){$("#search_tab_bar li").on("click",function(){var a=$("#search_tab_bar li").index(this);$("#search_tab_bar").find(".active").removeClass("active"),$(this).addClass("active"),$(".result_panel.show").removeClass("show"),$(".result_panel").eq(a).addClass("show")}),$(".m-search-wrap").on("click",".m-search-select",function(){$(".m-search-item").toggle()}),$(".m-search-item").on("click","li",function(){$(".m-search-item li").removeClass("on"),$(this).addClass("on");var a=$(this),b=a.index(),c=a.text();$(".m-select-item").text(c),searchType=a.attr("data-search-type"),$("#search_tab_bar ul li").removeClass("active"),$("#search_tab_bar ul li").eq(b).addClass("active")}),$("#indexSearchText,#indexListText").keyup(function(){var a=$(this),b=a.attr("data-search-type"),c=event||window.event;c&&13==c.keyCode&&("home"==b&&indexSearch(),"detail"==b&&search())})});