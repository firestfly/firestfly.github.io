<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<comment>Excel异步导入相关的sql</comment>
	
	<!-- 根据客户名称，证件类型，编码 获取客户信息 -->
	<entry key="sql-excel-queryCustomerByNameCard">
	<![CDATA[
		select *
		  from main_customer t
		 where ifnull(t.isdeleted,0) = 0
		   and t.certificatetype = #CARD_TYPE#
		   and t.certificateid = #CARD_NUMBER#
		   limit 1
	]]>
	</entry>
	
	<!-- 根据项目名称，项目编码 验证项目是否存在 -->
	<entry key="sql-excel-queryProjectID">
	<![CDATA[
		select p.*, ou.organizationId as has_role
		  from main_project p
		  LEFT JOIN mid_organization_user ou
		    on p.id = ou.organizationId
		   and ou.isdeleted = 0
		   and ou.status = 1
		   and ou.userId = #IMPORT_USERID#
		 where ifnull(p.isdeleted,0) = 0
		   and p.name = #PROJECT_NAME#
		   and p.code = #PROJECT_CODE#
	]]>
	</entry>
	
	
		
	<!-- 查询楼栋信息 -->
	<entry key="sql-excel-queryOrgByName">
	<![CDATA[
		select *
		  from tree_organization t
		 where ifnull(t.isdeleted,0) = 0
		   and t.levelTypeText = #BUILDING_LEVEL_TYPE#
		   and t.parentId = #PROJECT_ID#
		   and t.name = #BUILDING_NAME#
	]]>
	</entry>
	
			
	<!-- 查询房屋信息 -->
	<entry key="sql-excel-queryHourseByName">
	<![CDATA[
		select *
		  from main_house mh
		 where ifnull(mh.isdeleted,0) = 0
		   and ifnull(mh.isVirtual,0) = 0
		   and mh.projectId = #PROJECT_ID#
		   and mh.buildingName = #BUILDING_NAME#
		   and mh.name = #HOUSE_NAME#
		   and mh.code = #HOUSE_CODE#
	]]>
	</entry>
		
	<!-- 查询车位信息 -->
	<entry key="sql-excel-queryCarportByName">
	<![CDATA[
		select *
		  from main_carport mh
		 where ifnull(mh.isdeleted,0) = 0
		   and mh.projectId = ?
		   and trim(mh.name) = ?
		   and mh.code = ?
	]]>
	</entry>
	
	
	<!-- 查询车位客房关系 -->
	<entry key="sql-excel-queryCarportRelaction">
	<![CDATA[
		select count(*)
		  from mid_carport_customer cc
		 where cc.isDeleted = 0
		   and cc.carportId = ?
		   and cc.customerId = ?
		   and cc.relationType = ?
	]]>
	</entry>
	
	
	<!-- 查询客户房屋关系 -->
	<entry key="sql-excel-queryCustomerHouse">
	<![CDATA[
		select *
		  from mid_customer_house ch
		 where ch.houseId = #HOUSE_ID#
		   and ch.customerId = #CUSTOMER_ID#
			and IFNULL(ch.isDeleted,0)=0
	]]>
	</entry>

	<!-- 查询客户编码信息 -->
	<entry key="sql.customer.queryCustCodeGem">
	<![CDATA[
		select * from dim_cust_code_gen t where t.value = #VALUE#
	]]>
	</entry>
	
	
	<!-- 查询客户编码信息 -->
	<entry key="sql.customer.checkCode">
	<![CDATA[
		select count(1) from main_customer c where c.code = ?
	]]>
	</entry>
	 
    <!-- 根据客户id查询车辆信息-->
    <entry key="sql.common.query.dictionary">
        <![CDATA[
		select di.id, di.code, di.value, d.name as type_name
		  from dim_dictionary d, dim_dictionary_items di
		 where d.id = di.dictionaryId
		   and d.code = ?
	    ]]>
    </entry>
	 
	
</properties>